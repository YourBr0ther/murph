<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Murph Emulator</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Murph Emulator</h1>
            <div class="connection-status">
                <div class="status-item">
                    <span class="dot" id="uiDot"></span>
                    <span>UI:</span>
                    <span id="uiStatus">Disconnected</span>
                </div>
                <div class="status-item">
                    <span class="dot disconnected" id="serverDot"></span>
                    <span>Server:</span>
                    <span id="serverStatus">Disconnected</span>
                </div>
            </div>
        </header>

        <main>
            <section class="visualization">
                <div class="robot-container">
                    <div class="robot" id="robot">
                        <div class="face" id="face">
                            <div class="eyes">
                                <div class="eye left"></div>
                                <div class="eye right"></div>
                            </div>
                            <div class="mouth"></div>
                        </div>
                        <div class="direction-indicator"></div>
                    </div>
                    <div class="trail" id="trail"></div>
                </div>

                <div class="info-panel">
                    <div class="stat">
                        <label>Position</label>
                        <span id="position">(0.0, 0.0)</span>
                    </div>
                    <div class="stat">
                        <label>Heading</label>
                        <span id="heading">0¬∞</span>
                    </div>
                    <div class="stat">
                        <label>Expression</label>
                        <span id="expression">neutral</span>
                    </div>
                    <div class="stat">
                        <label>Sound</label>
                        <span id="sound">-</span>
                    </div>
                    <div class="stat">
                        <label>Moving</label>
                        <span id="moving">No</span>
                    </div>
                </div>
            </section>

            <section class="controls">
                <h2>Sensor Simulation</h2>
                <div class="button-group">
                    <button onclick="simulateTouch()" class="btn touch">
                        <span class="icon">üëÜ</span>
                        Pet
                    </button>
                    <button onclick="simulateRelease()" class="btn">
                        <span class="icon">‚úã</span>
                        Release
                    </button>
                    <button onclick="simulatePickup()" class="btn pickup">
                        <span class="icon">üñêÔ∏è</span>
                        Pick Up
                    </button>
                    <button onclick="simulateBump()" class="btn bump">
                        <span class="icon">üí•</span>
                        Bump
                    </button>
                    <button onclick="simulateShake()" class="btn shake">
                        <span class="icon">üåÄ</span>
                        Shake
                    </button>
                    <button onclick="simulateFalling()" class="btn falling">
                        <span class="icon">‚¨áÔ∏è</span>
                        Fall
                    </button>
                </div>
            </section>

            <section class="voice-controls">
                <h2>Voice Command</h2>
                <div class="voice-input-group">
                    <input type="text" id="voiceInput" placeholder="Murph, come here..."
                           onkeypress="if(event.key==='Enter') sendVoiceCommand()">
                    <button onclick="sendVoiceCommand()" class="btn voice">
                        <span class="icon">üé§</span>
                        Say
                    </button>
                </div>
                <div class="voice-hints">
                    Try: "Murph, come here" | "Murph, play" | "Murph, sleep" | "Good Murph!"
                </div>
            </section>

            <section class="motor-panel">
                <h2>Motor State</h2>
                <div class="motor-display">
                    <div class="wheel-container">
                        <span class="label">L</span>
                        <div class="wheel">
                            <div class="wheel-bar" id="leftWheelBar"></div>
                            <div class="wheel-center"></div>
                        </div>
                        <span class="speed-label" id="leftSpeed">0%</span>
                    </div>
                    <div class="motor-info">
                        <span id="motorDirection">STOP</span>
                    </div>
                    <div class="wheel-container">
                        <span class="label">R</span>
                        <div class="wheel">
                            <div class="wheel-bar" id="rightWheelBar"></div>
                            <div class="wheel-center"></div>
                        </div>
                        <span class="speed-label" id="rightSpeed">0%</span>
                    </div>
                </div>
            </section>

            <section class="sensor-panel">
                <h2>Sensor Data</h2>
                <canvas id="imuGraph" width="400" height="100"></canvas>
                <div class="sensor-values">
                    <div class="sensor-row">
                        <span class="sensor-label">Accel:</span>
                        <span class="val-x" id="accelX">X: 0.00</span>
                        <span class="val-y" id="accelY">Y: 0.00</span>
                        <span class="val-z" id="accelZ">Z: -1.00</span>
                    </div>
                    <div class="sensor-row">
                        <span class="sensor-label">Touch:</span>
                        <span id="touchElectrodes">None</span>
                    </div>
                </div>
            </section>

            <section class="state-panel">
                <h2>Raw State</h2>
                <pre id="state">Waiting for connection...</pre>
            </section>
        </main>
    </div>

    <script src="/static/emulator.js"></script>
</body>
</html>
